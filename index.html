<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>zhangjianhong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="zhangjianhong">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="zhangjianhong">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zhangjianhong">
  
    <link rel="alternate" href="/atom.xml" title="zhangjianhong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">zhangjianhong</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-面试题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/面试题/" class="article-date">
  <time datetime="2018-05-27T15:43:18.103Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/面试题/">这几天的面试题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>1、setTimeout用var 或者 let</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line"><span class="comment">//先输出5，然后隔一秒输出其他的五个5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line"><span class="comment">//最下面的i先报错，然后隔一秒输出其他的五个0,1,2,3,4</span></span><br></pre></td></tr></table></figure>
<p><strong>2、display:flex</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 容器的属性：</span></span><br><span class="line"><span class="comment">* flex-direction:</span></span><br><span class="line"><span class="comment">* flex-wrap:</span></span><br><span class="line"><span class="comment">* flex-flow:该属性是flex-direction和flex-wrap的简写形式</span></span><br><span class="line"><span class="comment">* justify-content:该属性定义了子元素在容器中的对齐方式</span></span><br><span class="line"><span class="comment">* align-items:该属性，垂直居中子元素</span></span><br><span class="line"><span class="comment">* align-content:属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 项目（子元素）的属性：</span></span><br><span class="line"><span class="comment">* order：定义项目的排列顺序，数值越小，排列越靠前，默认值为0；</span></span><br><span class="line"><span class="comment">* flex-grow:项目的放大比例，默认值是0；</span></span><br><span class="line"><span class="comment">* flex-shrink:属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的</span></span><br><span class="line"><span class="comment">* flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小。</span></span><br><span class="line"><span class="comment">* flex-basis:属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间。</span></span><br><span class="line"><span class="comment">* flex:该属性是：flex-grow, flex-shrink 和 flex-basis的简写</span></span><br><span class="line"><span class="comment">* align-self:属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><strong>3、前端SEO优化</strong></p>
<p>1、优化html标签（不要什么都用div，尽量合理的使用ul、ol、table等）html语义化<br>2、meta描述（可定义关键词、网站描述等）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt; meta name=<span class="string">"keywords"</span> content=<span class="string">"关键词1，关键词2"</span>/&gt;</span><br><span class="line">&lt; meta name=<span class="string">"description"</span> content=<span class="string">"描述1，描述2"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>3、前景图片<code>&lt;img/&gt;</code>添加alt属性、这个比较重要，有很多适用场景<br>4、前景图片<code>&lt;img/&gt;</code>要定义大小、不然会造成页面重新渲染，影响加载速度<br>5、内链采用绝对路径，减少服务器的响应时间<br>6、重要的内容HTML代码放在前面：搜索引擎抓取HTML 的顺序是从上到下，有的搜索引擎对抓取长度有限制，保证重要内容一定会被抓取。<br>7、重要的内容不要用js输出，爬虫不会执行js获取内容。<br>8、尽量少用iframe，搜索引擎不会抓取iframe中的内容。<br>9、删除console<br>10、删除debugger<br>11、图片雪碧图</p>
<p><strong>4、vuex</strong></p>
<p>1、state负责存储整个应用的状态数据，要注意在入口文件main.js注入store对象，就可以在根组件下的子组件使用this.$store.state获取状态了。</p>
<p>2、mutation里面写着改变状态数据的方法（一定要写在这里），mutation是同步事件要注意，里面的方法不能写异步的，组件中触发一个mutation的方法store.commit(mutationName)。</p>
<p>3、action也是一个改变状态数据的事件，但不同的是action改变状态是通过调用mutation来实现的，注意action是个异步事件。直接触发action就使用this.$store.dispatch(actionName)。</p>
<p>actions和mutations的区别</p>
<p>1.Actions 提交的是 mutations，而不是直接变更状态。也就是说，actions会通过mutations，让mutations帮他提交数据的变更。<br>2.Action 可以包含任意异步操作。ajax、setTimeout、setInterval不在话下</p>
<p>各个类型的 API各司其职，mutation 只管存，你给我（dispatch）我就存；action只管中间处理，处理完我就给你，你怎么存我不管；Getter 我只管取，我不改的。　action放在了 methods 里面，说明我们应该把它当成函数来用（讲道理，钩子函数也应该可以的） mutation是写在store里面的，这说明，它就是个半成品，中间量，我们不应该在外面去操作它。getter写在了 computed 里面，这说明虽然 getter我们写的是函数，但是我们应该把它当成计算属性来用。</p>
<p><strong>5、移动端网页布局</strong></p>
<p>1 简单一点的页面，一般高度直接设置成固定值，宽度一般撑满整个屏幕。</p>
<p>2 稍复杂一些的是利用百分比设置元素的大小来进行适配，或者利用flex等css去设置一些需要定制的宽度。</p>
<p>3 再复杂一些的响应式页面，需要利用css3的media query属性来进行适配，大致思路是根据屏幕不同大小，来设置对应的css样式。</p>
<p><strong>6、bootstrap实现原理</strong></p>
<p>媒体查询（css3的media query属性）</p>
<p><strong>7、路由懒加载</strong></p>
<p>结合 Vue 的异步组件和 Webpack 的代码分割功能，轻松实现路由组件的懒加载。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tvProgram = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/page/tvProgram'</span>], resolve);  </span><br><span class="line"><span class="keyword">const</span> game = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/page/game'</span>], resolve);  </span><br><span class="line"><span class="keyword">const</span> gameitem = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/page/gameItem'</span>], resolve);</span><br></pre></td></tr></table></figure></p>
<p><strong>8、vue的router中的‘/’和‘#’区别</strong></p>
<p><strong>9、require和import</strong><br>在 ES6 之前，社区制定了一些模块加载方案，最主要的有 CommonJS 和 AMD 两种。前者用于服务器，后者用于浏览器。ES6 在语言标准的层面上，实现了模块功能，而且实现得相当简单，完全可以取代 CommonJS 和 AMD 规范，成为浏览器和服务器通用的模块解决方案。</p>
<p>ES6 模块的设计思想是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。CommonJS 和 AMD 模块，都只能在运行时确定这些东西。比如，CommonJS 模块就是对象，输入时必须查找对象属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommonJS模块</span></span><br><span class="line"><span class="keyword">let</span> &#123; stat, exists, readFile &#125; = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">let</span> _fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> stat = _fs.stat;</span><br><span class="line"><span class="keyword">let</span> exists = _fs.exists;</span><br><span class="line"><span class="keyword">let</span> readfile = _fs.readfile;</span><br></pre></td></tr></table></figure>
<p>上面代码的实质是整体加载fs模块（即加载fs的所有方法），生成一个对象（_fs），然后再从这个对象上面读取 3 个方法。这种加载称为“运行时加载”，因为只有运行时才能得到这个对象，导致完全没办法在编译时做“静态优化”。</p>
<p>ES6 模块不是对象，而是通过export命令显式指定输出的代码，再通过import命令输入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; stat, exists, readFile &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br></pre></td></tr></table></figure>
<p>上面代码的实质是从fs模块加载 3 个方法，其他方法不加载。这种加载称为“编译时加载”或者静态加载，即 ES6 可以在编译时就完成模块加载，效率要比 CommonJS 模块的加载方式高。当然，这也导致了没法引用 ES6 模块本身，因为它不是对象。</p>
<p>由于 ES6 模块是编译时加载，使得静态分析成为可能。有了它，就能进一步拓宽 JavaScript 的语法，比如引入宏（macro）和类型检验（type system）这些只能靠静态分析实现的功能。</p>
<p><strong>10、AMD和CMD区别</strong><br>AMD 是 RequireJS<br>CMD 是 SeaJS<br>相同之处：RequireJS 和 Sea.js 都是模块加载器，倡导模块化开发理念，核心价值是让 JavaScript 的模块化开发变得简单自然。<br>不同之处:   1. 对于依赖的模块，AMD 是提前执行，CMD 是延迟执行。不过 RequireJS 从 2.0 开始，也改成可以延迟执行（根据写法不同，处理方式不同）。CMD 推崇 as lazy as possible.2. CMD 推崇依赖就近，AMD 推崇依赖前置。</p>
<p><strong>11、ES6的extends支持多重继承吗？</strong><br>并不支持，ES6的class其实本质还是基于原型链继承的语法糖。<br>不过可以通过mixin的方式，将多个类混合成一个类，从而来模拟多继承。<br>熟悉 JavaScript 的同学应该对 mixin 模式并不陌生。我们说 JavaScript / ES5 的继承模型是基于单一原型链的继承模型，通常情况下，在 JavaScript 实践中完全用原型链来实现继承式的代码复用，是远远不能满足需求的。因此实战中，我们的代码抽象基本上都是采用混合的模式，既有原型继承，也有 mixin 组合。</p>
<p><strong>12、HTML页面加载和解析流程</strong></p>
<p>1、用户输入网址（假设是个html页面，并且是第一次访问），浏览器向服务器发出请求，服务器返回html文件；<br>2、浏览器开始载入html代码，发现＜head＞标签内有一个＜link＞标签引用外部CSS文件；<br>3、浏览器又发出CSS文件的请求，服务器返回这个CSS文件；<br>4、浏览器继续载入html中＜body＞部分的代码，并且CSS文件已经拿到手了，可以开始渲染页面了；<br>5、浏览器在代码中发现一个＜img＞标签引用了一张图片，向服务器发出请求。此时浏览器不会等到图片下载完，而是继续渲染后面的代码；<br>6、服务器返回图片文件，由于图片占用了一定面积，影响了后面段落的排布，因此浏览器需要回过头来重新渲染这部分代码；<br>7、浏览器发现了一个包含一行Javascript代码的＜script＞标签，赶快运行它；<br>8、Javascript脚本执行了这条语句，它命令浏览器隐藏掉代码中的某个＜div＞ （style.display=”none”）。杯具啊，突然就少了这么一个元素，浏览器不得不重新渲染这部分代码；<br>9、终于等到了＜/html＞的到来，浏览器泪流满面……<br>10、等等，还没完，用户点了一下界面中的“换肤”按钮，Javascript让浏览器换了一下＜link＞标签的CSS路径；<br>11、浏览器召集了在座的各位＜div＞＜span＞＜ul＞＜li＞们，“大伙儿收拾收拾行李，咱得重新来过……”，浏览器向服务器请求了新的CSS文件，重新渲染页面。</p>
<p><strong>13、vue如何定义全局组件，然后用vue.use()引用</strong><br><a href="https://blog.csdn.net/tank_in_the_street/article/details/73135410" target="_blank" rel="noopener">https://blog.csdn.net/tank_in_the_street/article/details/73135410</a></p>
<p><a href="https://www.cnblogs.com/yesyes/p/6658611.html" target="_blank" rel="noopener">https://www.cnblogs.com/yesyes/p/6658611.html</a></p>
<ol>
<li>Vue.extend()是Vue构造器的扩展，调用Vue.extend()创建的是一个组件构造器，而不是一个具体的组件实例。 </li>
<li>Vue.extend()构造器有一个选项对象，选项对象的template属性用于定义组件要渲染的HTML。 </li>
<li>使用Vue.component()注册组件时，需要提供2个参数，第1个参数时组件的标签，第2个参数是组件构造器。 </li>
<li>Vue.component()方法内部会调用组件构造器，创建一个组件实例。 </li>
<li>组件应该挂载到某个Vue实例下，否则它不会生效。</li>
</ol>
<p><strong>14、axios的</strong><br><a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener">https://www.kancloud.cn/yunye/axios/234845</a></p>
<p><strong>15、router</strong><br>这其实需要你理解什么是hashhistory和bowserhistory<br>带#的hash其实就是根据window.location.hash里的字符串来处理路由关系，页面刷新肯定是没问题的<br>但是不带#的bowserhistory只有斜杠/相当于访问目录，当前会话肯定没问题，但是刷新页面肯定会挂，放弃hash#的bowserhistory是需要服务端支持的，要做映射的。</p>
<p>还有就是#是不会导致页面访问错误的啊。。。hash是url标准里的一环。。</p>
<p>映射关系例如你访问<a href="http://abc/#a" target="_blank" rel="noopener">http://abc/#a</a> 这其实就是访问abc的首页下的a路由<br>如果你访问<a href="http://abc/a" target="_blank" rel="noopener">http://abc/a</a> 如果没做服务器映射的话，相当于你要找根目录下的a文件，然而这个目录其实是前端定义的路由，服务器上是没有a这个文件的。这时候就需要服务端把abc/映射到abc/index.html 之后的就是查询的值</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/面试题/" data-id="cjhozwdsm0003uwzb47g68dmt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jQuery的优化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/jQuery的优化/" class="article-date">
  <time datetime="2018-05-27T15:05:38.323Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/jQuery的优化/">jQuery优化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在项目中，为了使项目更加流畅，需要优化<strong>jQuery</strong></p>
<h2 id="jQuery代码性能优化的方法"><a href="#jQuery代码性能优化的方法" class="headerlink" title="jQuery代码性能优化的方法"></a>jQuery代码性能优化的方法</h2><ul>
<li>1、总是使用#id去寻找element.</li>
</ul>
<p>在jQuery中最快的选择器是ID选择器 <code>$(&#39;#someid&#39;)</code>. 这是因为它直接映射为JavaScript的getElementById()方法。</p>
<ul>
<li>2、在Classes前面使用Tags</li>
</ul>
<p>在jQuery中第二快的选择器就是Tag选择器 <code>$(&#39;head&#39;)</code>. 而这是因为它直接映射到JavaScript的getElementsByTagName()方法。</p>
<ul>
<li>3、缓存jQuery对象</li>
</ul>
<p>养成保存jQuery对象到一个变量上的习惯。不要这样做：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#traffic_light input.on).bind('</span>click<span class="string">', function()&#123;...&#125;); </span></span><br><span class="line"><span class="string"></span></span><br><span class="line">$('#traffic_light input.on).css('border', '3px dashed yellow');</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#traffic_light input.on).css('</span>background-color<span class="string">', '</span>orange<span class="string">');</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line">$('#traffic_light input.on).fadeIn('slow');</span><br></pre></td></tr></table></figure>
<p>取而代之，首现保存jQuery变量到一个本地变量后，再继续你的操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $active_light = $(<span class="string">'#traffic_light input.on'</span>);</span><br><span class="line">  </span><br><span class="line">$active_light.bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;);</span><br><span class="line">  </span><br><span class="line">$active_light.css(<span class="string">'border'</span>, <span class="string">'3px dashed yellow'</span>);</span><br><span class="line">  </span><br><span class="line">$active_light.css(<span class="string">'background-color'</span>, <span class="string">'orange'</span>);</span><br><span class="line">  </span><br><span class="line">$active_light.fadeIn(<span class="string">'slow'</span>);</span><br></pre></td></tr></table></figure>
<p><code>提示：使用$前辍表示我们的本地变量是一个jQuery包集。记住，不要在你的应该程序里出现一次以上的jQuery重复的选择操作。 额外提示：延迟存储jQuery对象结果。</code></p>
<p>如果你想在你的程序的其它地方使用jQuery结果对象，或者你的函数要执行多次，要把它缓存在一个全局范围的对象里。通过定义一个全局容器保存jQuery结果对象，就可以在其它的函数里引用它。</p>
<ul>
<li>4、更好的利用链</li>
</ul>
<p>前面的例子也可以这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $active_light = $(<span class="string">'#traffic_light input.on'</span>);</span><br><span class="line"> </span><br><span class="line">$active_light.bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;)</span><br><span class="line"> </span><br><span class="line"> .css(<span class="string">'border'</span>, <span class="string">'3px dashed yellow'</span>)</span><br><span class="line"> </span><br><span class="line"> .css(<span class="string">'background-color'</span>, <span class="string">'orange'</span>)</span><br><span class="line"> </span><br><span class="line"> .fadeIn(<span class="string">'slow'</span>);</span><br></pre></td></tr></table></figure>
<p>这样可以让我们写更少的代码，使JavaScript更轻量。</p>
<ul>
<li>5、使用子查询</li>
</ul>
<p>jQuery允许我们在一个包集上附加其它的选择器。因为我们已经在本地变量里保存了父对象这样会减少以后在选择器上的性能开销。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $traffic_light = $(<span class="string">'#traffic_light'</span>), </span><br><span class="line"> </span><br><span class="line">$active_light = $traffic_light.find(<span class="string">'input.on'</span>), </span><br><span class="line"> </span><br><span class="line">$inactive_lights = $traffic_light.find(<span class="string">'input.off'</span>);</span><br></pre></td></tr></table></figure>
<p><code>提示：可以用逗号隔开一次定义多个本地变量，这样可以节省一些字节。</code></p>
<ul>
<li>6、限制直接对DOM操作</li>
</ul>
<p>DOM操作的基本做法是在内存中创建DOM结构，然后再更新DOM结构。这不是jQuery最好的做法，但对JavaScript来讲是高效的。直接操作DOM结构性能是低下的。 例如，如果你需要动态创建一列元素，不要这样做：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> top_100_list = [...], <span class="comment">// assume this has 100 unique strings </span></span><br><span class="line"> </span><br><span class="line">$mylist = $(<span class="string">'#mylist'</span>); <span class="comment">// jQuery selects our &lt;ul&gt; element</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, l=top_100_list.length; i&lt;l; i++)&#123; </span><br><span class="line"> </span><br><span class="line"> $mylist.append(<span class="string">'&lt;li&gt;'</span> + top_100_list[i] + <span class="string">'&lt;/li&gt;'</span>);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>取而代之，我们希望在插入DOM结构之前先在一个字符串里创建一套元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> top_100_list = [...], <span class="comment">// assume this has 100 unique strings </span></span><br><span class="line"> </span><br><span class="line">$mylist = $(<span class="string">'#mylist'</span>), <span class="comment">// jQuery selects our &lt;ul&gt; element </span></span><br><span class="line"> </span><br><span class="line">top_100_li = <span class="string">""</span>; <span class="comment">// This will store our list items</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, l=top_100_list.length; i&lt;l; i++)&#123;</span><br><span class="line"> </span><br><span class="line"> top_100_li += <span class="string">'&lt;li&gt;'</span> + top_100_list[i] + <span class="string">'&lt;/li&gt;'</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$mylist.html(top_100_li);</span><br></pre></td></tr></table></figure>
<p>更快的做法，在插入DOM结构之前我们应该总是在一个父节点里包含许多元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> top_100_list = [...], <span class="comment">// assume this has 100 unique strings </span></span><br><span class="line"> </span><br><span class="line">$mylist = $(<span class="string">'#mylist'</span>), <span class="comment">// jQuery selects our &lt;ul&gt; element </span></span><br><span class="line"> </span><br><span class="line">top_100_ul = <span class="string">'&lt;ul id="#mylist"&gt;'</span>; <span class="comment">// This will store our entire unordered list</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, l=top_100_list.length; i&lt;l; i++)&#123;</span><br><span class="line"> </span><br><span class="line"> top_100_ul += <span class="string">'&lt;li&gt;'</span> + top_100_list[i] + <span class="string">'&lt;/li&gt;'</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">top_100_ul += <span class="string">'&lt;/ul&gt;'</span>; <span class="comment">// Close our unordered list</span></span><br><span class="line"> </span><br><span class="line">$mylist.replaceWith(top_100_ul);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>7、事件委托（又名：冒泡事件）</p>
</li>
<li><p>8、采用jQuery的内部函数data()来存储状态</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#head'</span>).data(<span class="string">'name'</span>, <span class="string">'value'</span>);</span><br><span class="line"><span class="comment">// 之后在你的应用中调用:</span></span><br><span class="line">$(<span class="string">'#head'</span>).data(<span class="string">'name'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>9、适当使用原生JS</li>
</ul>
<p>创建jQuery对象会带来一些开销。所以，如果比较注重性能的话，尽可能使用原生的javascript。在某些方面可能会更容易理解和写更少的代码。</p>
<ul>
<li>10、慎用.live()方法（应该说尽量不要使用）</li>
</ul>
<p>这是jQuery1.3.1版本之后增加的方法，这个方法的功能就是为 新增的DOM元素 动态绑定事件。但对于效率来说，这个方法比较占用资源。所以请尽量不要使用它。</p>
<ul>
<li>11、推迟到 $(window).load</li>
</ul>
<p>jQuery对于开发者来说有一个很诱人的东西, 可以把任何东西挂到$(document).ready下。尽管$(document).rady 确实很有用，它可以在页面渲染时，其它元素还没下载完成就执行。如果你发现你的页面一直是载入中的状态，很有可能就是$(document).ready函数引起的。你可以通过将jQuery函数绑定到$(window).load 事件的方法来减少页面载入时的cpu使用率。它会在所有的html(包括iframe)被下载完成后执行。一些特效的功能，例如拖放, 视觉特效和动画, 预载入隐藏图像等等，都是适合这种技术的场合。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/jQuery的优化/" data-id="cjhozwdsk0002uwzbfzq5df81" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Git和SVN" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/Git和SVN/" class="article-date">
  <time datetime="2018-05-27T14:43:16.289Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/Git和SVN/">Git 和SVN的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><ul>
<li><strong>分布式</strong> 版本控制</li>
</ul>
<p>git是一个开源的<strong>分布式</strong>版本控制系统,用以快速高效的处理项目从很小到非常大的项目的版本控制的所有事情。另外官网上的介绍还有,git性能卓越,超过甚至颠覆一些其他的产品如cvs,perfamce等,git有非常方便的本地分支,多个工作流等。</p>
<h2 id="SVN"><a href="#SVN" class="headerlink" title="SVN"></a>SVN</h2><ul>
<li><strong>集中式</strong> 版本控制<br>版本库是集中放在中央服务器的。集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。</li>
</ul>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>所谓分布式和集中式的区别主要就是版本的信息保存的位置不同。集中式的版本控制是把所有的版本信息数据都保存到服务器上，也就是说，当服务器完蛋了，我们就无法获取版本信息，那么就无法进行版本回退等版本的操作。而分布式的版本控制是把版本信息数据保存在本地或远程服务器上，所以就算服务器崩完蛋了，都可以进行版本控制的操作。</p>
<ol>
<li>git的数据备份比svn更安全，git是每个历史版本都存储完整的文件,便于恢复,svn是存储差异文件,历史版本不可恢复；</li>
<li>一般情况下，git速度更快,效率更高；</li>
<li>svn创建分支比较麻烦，而git的分支创建非常简单，git有着更优雅的分支和合并实现。</li>
<li>git可离线完成大部分操作,svn则不能。</li>
<li>git有着更强的撤销修改和修改历史版本的能力。</li>
<li>旧版的svn会在每个文件夹下建立一个.svn，git只会在根目录下拥有一个.git。</li>
<li>工作流程有所不同。<br>SVN的流程：每次先从服务器上更新代码，修改完成后，上传到服务器。<br>git的流程：每次提交到服务器之前，也需要从服务器上更新代码，每次修改或者新增代码后，提交到本地，当有需要时，提交到服务器。意思就是git本地多了一个可以跟服务器一样的信息保存库。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/Git和SVN/" data-id="cjhozwdsb0000uwzbjnb6d4je" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Markdown语法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/Markdown语法/" class="article-date">
  <time datetime="2018-05-27T09:34:55.882Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/Markdown语法/">Markdown语法入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.markdown.cn/" target="_blank" rel="noopener">MarkDown</a> 是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p>
<h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>总共六级标题，建议在井号后加一个空格，这是最标准的 Markdown 语法。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure>
<p>样式如下图：</p>
<p><img src="/2018/05/27/Markdown语法/markdown_title.png" alt=""></p>
<h2 id="换行和分段"><a href="#换行和分段" class="headerlink" title="换行和分段"></a>换行和分段</h2><ul>
<li>换行：只需在行末加两个空格键和一个回车键即可换行。 </li>
<li>分段：段落之间空一行即可。</li>
</ul>
<h2 id="文件样式"><a href="#文件样式" class="headerlink" title="文件样式"></a>文件样式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**加粗**</span><br><span class="line">*斜体*</span><br><span class="line">~~删除线~~ </span><br><span class="line"><span class="string">`底纹`</span></span><br></pre></td></tr></table></figure>
<p>样式如下：</p>
<p><img src="/2018/05/27/Markdown语法/markdown_text.png" alt=""></p>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>在 Markdown 下，无序列表直接在文字前加 <code>-</code> 或者<code>*</code> 或者<code>+</code> 即可，有序列表则直接在文字前加<code>1.</code>、<code>2.</code>、<code>3.</code>。符号要和文字之间加上一个字符的<code>空格</code>。</p>
<ul>
<li><p>无序列表：在文字前加上上面那三个特殊符号即可生成无序列表。在 <code>*</code> 前加<code>两个空格键</code>或者一个 <code>tab</code> 就可以产生一个子列表。</p>
</li>
<li><p>有序列表：在文本前加 <code>字母.</code> 或 <code>数字.</code> 即可生成一个有序列表。<code>注意</code>，当你第一个序号使用什么作为标记的，那么同级别的列表就会自动使用其作为标记。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#### 无序列表</span><br><span class="line">* <span class="number">1</span></span><br><span class="line">* <span class="number">2</span></span><br><span class="line">    * <span class="number">2.1</span></span><br><span class="line">        * <span class="number">2.1</span><span class="number">.1</span></span><br><span class="line">            * <span class="number">2.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">* <span class="number">3</span></span><br><span class="line"></span><br><span class="line">#### 有序列表</span><br><span class="line"><span class="number">1.</span> <span class="number">1</span></span><br><span class="line"><span class="number">2.</span> <span class="number">2</span></span><br><span class="line">    a. <span class="number">2.1</span></span><br><span class="line">    b. <span class="number">2.2</span></span><br><span class="line"><span class="number">3.</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">#### 有序和无序混排</span><br><span class="line"><span class="number">1.</span> <span class="number">1</span></span><br><span class="line"><span class="number">2.</span> <span class="number">2</span></span><br><span class="line">    a. <span class="number">2.1</span></span><br><span class="line">    b. <span class="number">2.2</span></span><br></pre></td></tr></table></figure>
<p>样式如下：</p>
<p><img src="/2018/05/27/Markdown语法/markdown_ul_ol.png" alt=""></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>只要在文本内容之前加 <code>&gt;</code> 即可将文本变成引用文本。</p>
<p>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 我是引用</span><br></pre></td></tr></table></figure></p>
<p>样式如下：</p>
<blockquote>
<p>我是引用</p>
</blockquote>
<h2 id="图片与链接"><a href="#图片与链接" class="headerlink" title="图片与链接"></a>图片与链接</h2><p>如果只是简单的插入图片和连接，那么非常简单。两者仅仅是一个 <code>!</code> 的区别。</p>
<ul>
<li>图片 <code>![图片描述](链接的地址)</code></li>
<li>链接 <code>[文本内容](链接的地址)</code></li>
</ul>
<p>本地图片的引用</p>
<ol>
<li>把主页配置文件<code>_config.yml</code>里的<code>post_asset_folder:</code>这个选项设置为：<code>true</code>;</li>
<li>在hexo目录下执行这样一句话<code>npm install hexo-asset-image --save</code>，这是下载安装一个可以上传本地图片的插件;</li>
<li>等待安装完成后，再运行<code>hexo n &quot;xxxx&quot;</code>来生成md博文时，<code>/source/_posts</code>文件夹内除了xxxx.md文件还有一个同名的文件夹;</li>
<li>最后在xxxx.md中想引入图片时，先把图片复制到xxxx这个文件夹中，然后只需要在xxxx.md中按照markdown的格式引入图片：<code>![你想输入的替代文字](xxxx/图片名.png)</code>;<br><code>注意：</code> xxxx是这个md文件的名字，也是同名文件夹的名字。只需要有文件夹名字即可，不需要有什么绝对路径。你想引入的图片就只需要放入xxxx这个文件夹内就好了，很像引用相对路径;</li>
<li>最后检查一下，<code>hexo g</code>生成页面后，进入<code>public\2018\05\27\xxxx\index.html</code>文件中查看相关字段，可以发现，html标签内的语句是<code>&lt;img src=&quot;2018/05/27/xxxx/图片名.jpg&quot;&gt;</code>，而不是<code>&lt;img src=&quot;xxxx/图片名.jpg&gt;</code>。这很重要，关乎你的网页是否可以真正加载你想插入的图片。</li>
</ol>
<h2 id="水平线"><a href="#水平线" class="headerlink" title="水平线"></a>水平线</h2><p>三个 <code>---</code> 或者 <code>***</code> 都可以画出一条水平分隔线</p>
<h2 id="代码框"><a href="#代码框" class="headerlink" title="代码框"></a>代码框</h2><ul>
<li>两对 ``` 包裹</li>
<li>代码前加四个空格键</li>
<li>代码前加一个 tab 键</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(1);</span><br></pre></td></tr></table></figure>
<pre><code>console.log(2);

console.log(3);
</code></pre><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>在 Markdown 下制作表格，是非常非常麻烦的一件事——你必须画出来！</p>
<h2 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h2><p>脚注总是成对出现的，<code>[^1]</code>作为标记，可以点击跳至末尾注解。<code>[^1]:</code>填写注解，不论写在什么位置，都会出现在文章的末尾。</p>
<p>点我有注解哦<a href="我是在文章末尾">^1</a> </p>
<p>我是随机数<br>我是随机数<br>我是随机数<br>我是随机数<br>我是随机数</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>注释是给自己看的，预览时也不会出现，当然发布出去别人也不会看见。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 我是注释 --&gt;</span><br></pre></td></tr></table></figure>
<!-- 我是注释 -->
<h2 id="首行缩进"><a href="#首行缩进" class="headerlink" title="首行缩进"></a>首行缩进</h2><p>在输入法的<code>全角</code>模式下，输入两个空格键即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/Markdown语法/" data-id="cjhor2h6q0002vgzbmh58l1bc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-基于github和hexo搭建博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/基于github和hexo搭建博客/" class="article-date">
  <time datetime="2018-05-27T09:27:15.128Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/基于github和hexo搭建博客/">基于Github和Hexo搭建自己的博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>博客就是记录自己工作和学习当中遇到的问题和自己的心得体会，在这里我简单分享一下自己搭建博客的经历，希望对你有所帮助。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li>申请Github账号：<br>首先我们要有一个属于自己的github账号，登录进去后我们需要去<code>Create a new repository</code>，填写<code>Repository name</code>。这里的名称我们需要注意下，填写固定格式：<code>userName.github.io</code>，这里的<code>userName</code>是指我们注册github时的账号名称。填写完成后点击<code>Create Repository</code>就可以了。</li>
<li>安装最新版的node </li>
<li>安装git</li>
<li>所有的都安装成功后<code>npm install -g hexo-cli</code></li>
</ul>
<h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><p>新建一个文件夹，进入该文件夹中，在空白处右击打开<code>Git Bash Here</code>分别输入一下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br><span class="line">$ hexo install</span><br></pre></td></tr></table></figure></p>
<h2 id="Git-配置"><a href="#Git-配置" class="headerlink" title="Git 配置"></a>Git 配置</h2><p>输入以下命令配置用户名和邮箱：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;userName&quot;</span><br><span class="line">$ git config --global user.email &quot;userEmail@gmail.com&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="密钥生成"><a href="#密钥生成" class="headerlink" title="密钥生成"></a>密钥生成</h2><p>输入以下命令生成密钥，命令中<code>-C</code>,<code>C</code>是大写的，还有密钥的默认位置是：<code>C:/Users/用户名/.ssh/:</code></p>
<pre><code>$ ssh-keygen -t rsa -C &quot;userEmail@gmail.com&quot;
</code></pre><h2 id="配置密钥"><a href="#配置密钥" class="headerlink" title="配置密钥"></a>配置密钥</h2><p>打开<code>github</code>设置界面，选择<code>SSH and GPG key</code>创建一个<code>New SSH key</code>。打开生成的密钥文件将<code>id_rsa.pub</code>里内容复制到<code>Key</code>中，点击<code>Add SSh key</code>即可。</p>
<h2 id="本地查看"><a href="#本地查看" class="headerlink" title="本地查看"></a>本地查看</h2><p>分别输入以下命令后会出现<code>INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</code>这句话。此时我们就可以在本机查看博客了。默认是<code>http://localhost:4000</code>。 <code>Ctrl+c</code>结束服务。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<h2 id="上传GitHub"><a href="#上传GitHub" class="headerlink" title="上传GitHub"></a>上传GitHub</h2><p>首先修改文件<code>_config.yml</code>中的<code>deploy</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type:  git</span><br><span class="line">  repo:  git@github.com:smallmarker/smallmarker.github.io.git</span><br><span class="line">  branch:  master</span><br></pre></td></tr></table></figure>
<p>然后在<code>Git Bash</code>中分别输入：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure></p>
<p>如果此时报<code>ERROR Deployer not found:git</code>错误信息，这是因为还需要安装个东西，在<code>Git Bash</code>中输入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>等待安装成功后，在分别输入上面两个命令就好了。这时我们就可以查看自己的网址了如：<code>https://userName.github.io/</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/基于github和hexo搭建博客/" data-id="cjhor2h6s0003vgzb5jm38p1n" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vue-cli搭建的详细介绍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/vue-cli搭建的详细介绍/" class="article-date">
  <time datetime="2018-05-27T09:18:44.673Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/vue-cli搭建的详细介绍/">vue-cli文件详细信息</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="package-json-文件"><a href="#package-json-文件" class="headerlink" title="package.json 文件"></a>package.json 文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">//从name到private都是package的配置信息，也就是我们在脚手架搭建中输入的项目描述</span></span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"vue-book"</span>, <span class="comment">// 项目名称：不能以.(点)或者_(下划线)开头，不能包含大写字母，具有明确的含义与现有项目名字不能重复</span></span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"1.0.0"</span>, <span class="comment">// 项目版本号：遵循“大版本.次要版本.小版本”</span></span><br><span class="line">    <span class="string">"description"</span>: <span class="string">"learn vue project"</span>, <span class="comment">// 项目描述</span></span><br><span class="line">    <span class="string">"author"</span>: <span class="string">"jhzhang"</span>, <span class="comment">// 作者名字</span></span><br><span class="line">    <span class="string">"private"</span>: <span class="literal">true</span>, <span class="comment">// 是否私有</span></span><br><span class="line">    <span class="comment">// scripts 中的子项即是我们在控制台运行的脚本的缩写</span></span><br><span class="line">    <span class="string">"scripts"</span>: &#123;</span><br><span class="line">        <span class="comment">// (1) webpack-dev-server:启动了http服务，实现实时编译；</span></span><br><span class="line">        <span class="comment">// inline 模式会在webpack.config.js 入口配置中新增webpack-dev-server/client?http://localhost:8080/的入口，使得我们访问路径为:localhost:8080/index.html(相应的还有另外一种模式Iframe)</span></span><br><span class="line">        <span class="comment">// progress 显示打包的进度</span></span><br><span class="line">        <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js"</span>,</span><br><span class="line">        <span class="string">"start"</span>: <span class="string">"npm run dev"</span>, <span class="comment">// 与npm run dev 相同，直接运行开发环境</span></span><br><span class="line">        <span class="string">"build"</span>: <span class="string">"node build/build.js"</span> <span class="comment">// 使用node运行build文件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// (2) dependencies (项目依赖库)：在安装时使用 --save 则写入到 dependencies</span></span><br><span class="line">    <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">        <span class="string">"vue"</span>: <span class="string">"^2.5.2"</span>, <span class="comment">// vue.js</span></span><br><span class="line">        <span class="string">"vue-router"</span>: <span class="string">"^3.0.1"</span> <span class="comment">// vue的路由插件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// devDependencies(开发依赖库)：在安装时使用 --save-dev 将写入到devDependencies</span></span><br><span class="line">    <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">        <span class="string">"autoprefixer"</span>: <span class="string">"^7.1.2"</span>, <span class="comment">// autoprefixer作为postcss插件用来解析CSS补充前缀，例如：display:flex;会补充为display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;</span></span><br><span class="line">        <span class="comment">// babel 以下几个babel开头的都是针对es6解析的插件。用最新标准编写的 Javascript 代码向下编译成可以在今天随处可用的版本</span></span><br><span class="line">        <span class="string">"babel-core"</span>: <span class="string">"^6.22.1"</span>, <span class="comment">// babel 的核心。把 js 代码分析成 ast , 方便各个插件分析语法进行相应的处理。</span></span><br><span class="line">        <span class="string">"babel-helper-vue-jsx-merge-props"</span>: <span class="string">"^2.0.3"</span>, <span class="comment">// 预制babel-template函数，提供给vue，jsx等使用</span></span><br><span class="line">        <span class="string">"babel-loader"</span>: <span class="string">"^7.1.1"</span>, <span class="comment">// 使项目运行使用Babel和webpack来传输js文件，使用babel-core提供的api进行转译</span></span><br><span class="line">        <span class="string">"babel-plugin-syntax-jsx"</span>: <span class="string">"^6.18.0"</span>, <span class="comment">// 支持jsx</span></span><br><span class="line">        <span class="string">"babel-plugin-transform-runtime"</span>: <span class="string">"^6.22.0"</span>, <span class="comment">// 避免编译输出中的重复，直接编译到build环境中</span></span><br><span class="line">        <span class="string">"babel-plugin-transform-vue-jsx"</span>: <span class="string">"^3.5.0"</span>, <span class="comment">// babel 转译过程中使用到的插件，避免重复</span></span><br><span class="line">        <span class="string">"babel-preset-env"</span>: <span class="string">"^1.3.2"</span>, <span class="comment">// 转为es5，transform阶段使用到的插件之一</span></span><br><span class="line">        <span class="string">"babel-preset-stage-2"</span>: <span class="string">"^6.22.0"</span>, <span class="comment">// ECMAscript 第二阶段的规范</span></span><br><span class="line">        <span class="string">"chalk"</span>: <span class="string">"^2.0.1"</span>, <span class="comment">// 用来在命令行输出不同颜色字体</span></span><br><span class="line">        <span class="string">"copy-webpack-plugin"</span>: <span class="string">"^4.0.1"</span>, <span class="comment">// 拷贝资源和文件</span></span><br><span class="line">        <span class="string">"css-loader"</span>: <span class="string">"^0.28.0"</span>, <span class="comment">// webpack 先用css-loader加载器去解析后缀为css的文件，再使用style-loader生成一个内容为最终解析完的css代码的style标签，放到head标签里</span></span><br><span class="line">        <span class="string">"extract-text-webpack-plugin"</span>: <span class="string">"^3.0.0"</span>, <span class="comment">//将一个以上的包里面的文本提取到单独文件中</span></span><br><span class="line">        <span class="string">"file-loader"</span>: <span class="string">"^1.1.4"</span>, <span class="comment">// (3) 打包压缩文件，与url-loader用法类似</span></span><br><span class="line">        <span class="string">"friendly-errors-webpack-plugin"</span>: <span class="string">"^1.6.1"</span>, <span class="comment">// 识别某些类别的Webpack错误和清理，聚合和优先排序，以提供更好的开发经验</span></span><br><span class="line">        <span class="string">"html-webpack-plugin"</span>: <span class="string">"^2.30.1"</span>, <span class="comment">// 简化了HTML文件的创建，引入了外部资源，创建html的入口文件，可通过此项进行多页面的配置</span></span><br><span class="line">        <span class="string">"node-notifier"</span>: <span class="string">"^5.1.2"</span>, <span class="comment">// 支持使用node发送跨平台的本地通知</span></span><br><span class="line">        <span class="string">"optimize-css-assets-webpack-plugin"</span>: <span class="string">"^3.2.0"</span>, <span class="comment">// 压缩提取出的css，并解决ExtractTextPlugin分离出的js重复问题（多个文件引入同一css文件）</span></span><br><span class="line">        <span class="string">"ora"</span>: <span class="string">"^1.2.0"</span>, <span class="comment">// 加载（loading）的插件</span></span><br><span class="line">        <span class="string">"portfinder"</span>: <span class="string">"^1.0.13"</span>, <span class="comment">// 查看进程的端口</span></span><br><span class="line">        <span class="string">"postcss-import"</span>: <span class="string">"^11.0.0"</span>, <span class="comment">// 可以消耗本地文件、节点模块或web_modules</span></span><br><span class="line">        <span class="string">"postcss-loader"</span>: <span class="string">"^2.0.8"</span>, <span class="comment">// 用来兼容css的插件</span></span><br><span class="line">        <span class="string">"postcss-url"</span>: <span class="string">"^7.2.1"</span>, <span class="comment">// url上重新定位、内联或复制</span></span><br><span class="line">        <span class="string">"rimraf"</span>: <span class="string">"^2.6.0"</span>, <span class="comment">// 节点的UNIX命令RM-RF，强制删除文件或者目录的命令</span></span><br><span class="line">        <span class="string">"semver"</span>: <span class="string">"^5.3.0"</span>, <span class="comment">// 用来对特定的版本号做判断的</span></span><br><span class="line">        <span class="string">"shelljs"</span>: <span class="string">"^0.7.6"</span>, <span class="comment">// 使用它来消耗shell脚本在UNIX上的依赖，同时仍然保留其熟悉和强大的命令，即可执行Unix系统的命令</span></span><br><span class="line">        <span class="string">"uglifyjs-webpack-plugin"</span>: <span class="string">"^1.1.1"</span>, <span class="comment">// 压缩js文件</span></span><br><span class="line">        <span class="string">"url-loader"</span>: <span class="string">"^0.5.8"</span>, <span class="comment">// 压缩文件，可将图片转化为base64</span></span><br><span class="line">        <span class="string">"vue-loader"</span>: <span class="string">"^13.3.0"</span>, <span class="comment">// vue单文件组件的webpack加载器</span></span><br><span class="line">        <span class="string">"vue-style-loader"</span>: <span class="string">"^3.0.1"</span>, <span class="comment">// 类似于样式加载程序，您可以在CSS加载器之后将其链接，以将css动态地注入到文档中作为样式标签</span></span><br><span class="line">        <span class="string">"vue-template-compiler"</span>: <span class="string">"^2.5.2"</span>, <span class="comment">// 这个包可以用来预编译VUE模板到渲染函数，以避免运行时编译开销和CSP限制</span></span><br><span class="line">        <span class="string">"webpack"</span>: <span class="string">"^3.6.0"</span>, <span class="comment">// 打包工具</span></span><br><span class="line">        <span class="string">"webpack-bundle-analyzer"</span>: <span class="string">"^2.9.0"</span>, <span class="comment">// 可视化webpack输出文件的大小</span></span><br><span class="line">        <span class="string">"webpack-dev-server"</span>: <span class="string">"^2.9.1"</span>, <span class="comment">// 提供一个提供实时重载的开发服务器</span></span><br><span class="line">        <span class="string">"webpack-merge"</span>: <span class="string">"^4.1.0"</span> <span class="comment">// 他将数组和合并对象创建一个新对象。如果遇到函数，它将执行它们，通过算法运行结果，然后再次将返回的值封装在函数中</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// engines 是引擎，指定node和npm的版本</span></span><br><span class="line">    <span class="string">"engines"</span>: &#123;</span><br><span class="line">        <span class="string">"node"</span>: <span class="string">"&gt;= 6.0.0"</span>,</span><br><span class="line">        <span class="string">"npm"</span>: <span class="string">"&gt;= 3.0.0"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 限制了浏览器或者客户端需要什么版本才可运行</span></span><br><span class="line">    <span class="string">"browserslist"</span>: [</span><br><span class="line">        <span class="string">"&gt; 1%"</span>,</span><br><span class="line">        <span class="string">"last 2 versions"</span>,</span><br><span class="line">        <span class="string">"not ie &lt;= 8"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="postcssrc-js"><a href="#postcssrc-js" class="headerlink" title=".postcssrc.js"></a>.postcssrc.js</h2><p>.postcssrc.js 文件其实是postcss-loader包的一个配置，在webpack的旧版本可以直接在webpack.config.js中配置，现版本中postcss的文档示例独立出.postcssrc.js,里面写进去需要使用到的插件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="string">"plugins"</span>: &#123;</span><br><span class="line">    <span class="string">"postcss-import"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"postcss-url"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"autoprefixer"</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="babelrc"><a href="#babelrc" class="headerlink" title=".babelrc"></a>.babelrc</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 制定转码的规则</span></span><br><span class="line">    <span class="string">"presets"</span>: [</span><br><span class="line">        <span class="comment">// evn是使用babel-preset-env插件将js进行转码成es5，并且设置不转码的AMD，COMMONJS 的模块文件，制定浏览器的兼容</span></span><br><span class="line">        [<span class="string">"env"</span>, &#123;</span><br><span class="line">        <span class="string">"modules"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">"targets"</span>: &#123;</span><br><span class="line">            <span class="string">"browsers"</span>: [<span class="string">"&gt; 1%"</span>, <span class="string">"last 2 versions"</span>, <span class="string">"not ie &lt;= 8"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="string">"stage-2"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"plugins"</span>: [<span class="string">"transform-vue-jsx"</span>, <span class="string">"transform-runtime"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="src内文件"><a href="#src内文件" class="headerlink" title="src内文件"></a>src内文件</h2><p>我们开发的代码都放在src目录下，根据需要我们通常会再建一些文件加。比如pages文件夹，用来存放页面让components文件夹专门做好组件的工作；api文件夹，来封装请求的参数和方法；store文件夹，使用vuex来作为vue的状态管理工具，我也常叫它作前端的数据库等。</p>
<ul>
<li><p>1、assets文件：脚手架自动会放一个图片在里面作为初始页面的logo。平常我们使用的时候会在里面建立js、css、img、fonts等文件夹，作为静态资源调用</p>
</li>
<li><p>2、components文件夹：用来存放组件，合理地使用组件可以高效的实现复用的功能，从而更好的开发项目。一般情况下比如创建头部组件的时候，我们会新建一个header的文件夹，然后再新建一个header.vue的文件</p>
</li>
<li><p>3、router文件夹：该文件夹下有一个叫index.js的文件，用于实现页面的路由跳转，</p>
</li>
<li><p>4、App.vue: 作为我们的主文件，可通过使用开放入口让其他的页面组件得以显示。</p>
</li>
<li><p>5、main.js：作为我们的入口文件，主要作用是初始化vue实例并使用需要的插件，小型项目省略router时可放在该处</p>
</li>
</ul>
<h2 id="其他文件"><a href="#其他文件" class="headerlink" title="其他文件"></a>其他文件</h2><ul>
<li><p>1、.editorconfig: 编辑器的配置文件</p>
</li>
<li><p>2、.gitignore: 忽略git提交的一个文件，配置之后提交时将不会加载忽略的文件</p>
</li>
<li><p>3、index.html: 页面入口，经过编译之后的代码将插入到这来；</p>
</li>
<li><p>4、package-lock.json:锁定安装时的包的版本号，并且需要上传带git，以保证其他人npm install 时，大家的依赖能保证一致</p>
</li>
<li><p>5、README.md: 可此填写项目介绍</p>
</li>
<li><p>6、node_modules: 根据package.json 安装时候生成的依赖（安装包）</p>
</li>
</ul>
<h2 id="config文件夹"><a href="#config文件夹" class="headerlink" title="config文件夹"></a>config文件夹</h2><ul>
<li>1、config/dev.env.js<br>config内的文件其实是服务于build的，大部分是定义一个变量export出去</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span> <span class="comment">// 采用严格模式</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> prodEnv = <span class="built_in">require</span>(<span class="string">'./prod.env'</span>)</span><br><span class="line"><span class="comment">//webpack-merge 提供一个合并函数，它将数组和合并创建一个新对象。</span></span><br><span class="line"><span class="comment">//如果遇到函数，它将执行它们，通过算法运行结果，然后再次将返回的值封装在函数中，这边将dev和prod进行合并</span></span><br><span class="line"><span class="built_in">module</span>.exports = merge(prodEnv, &#123;</span><br><span class="line">  NODE_ENV: <span class="string">'"development"'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>2、config/prod.env.js<br>当开发是调用dev.env.js的开发环境配置，发布时调用prod.env.js的生产环境配置；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  NODE_ENV: <span class="string">'"production"'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>3、config/index.js<br>index.js文件；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    dev: &#123;</span><br><span class="line">        <span class="comment">// 开发环境下面的配置</span></span><br><span class="line">        assetsSubDirectory: <span class="string">'static'</span>, <span class="comment">// 子目录，一般存放css，js，image等文件</span></span><br><span class="line">        assetsPublicPath: <span class="string">'/'</span>, <span class="comment">// 跟目录</span></span><br><span class="line">        proxyTable: &#123;&#125;, <span class="comment">// 可利用该属性解决跨域的问题</span></span><br><span class="line">        host: <span class="string">'localhost'</span>, <span class="comment">// 地址</span></span><br><span class="line">        port: <span class="number">8080</span>, <span class="comment">// 端口号设置，端口号占用出现问题可在此处修改</span></span><br><span class="line">        autoOpenBrowser: <span class="literal">false</span>, <span class="comment">// 是否在编译(输入命令行 npm run dev)后打开http://localhost:8080/页面，以前配置为true，近些版本改为false,个人偏向习惯自动打开页面</span></span><br><span class="line">        errorOverlay: <span class="literal">true</span>, <span class="comment">// 浏览器错误提示</span></span><br><span class="line">        notifyOnErrors: <span class="literal">true</span>, <span class="comment">// 跨平台错误提示</span></span><br><span class="line">        poll: <span class="literal">false</span>, <span class="comment">// 使用文件系统（file system）获取文件改动的通知devServer.watchOptions</span></span><br><span class="line">        devtool: <span class="string">'cheap-module-eval-source-map'</span>, <span class="comment">// 增加调试，该属性为原始原始源代码（仅限行）不可在生产环境中使用</span></span><br><span class="line">        cacheBusting: <span class="literal">true</span>, <span class="comment">// 使缓存失效</span></span><br><span class="line">        cssSourceMap: <span class="literal">true</span> <span class="comment">// 代码压缩后进行调bug定位将非常困难，于是引入sourcemap记录压缩前后的位置信息记录，当产生错误时直接定位到未压缩前的位置，将大大的方便我们调试</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    build: &#123;</span><br><span class="line">        <span class="comment">// 生产环境下面的配置</span></span><br><span class="line">        index: path.resolve(__dirname, <span class="string">'../dist/index.html'</span>), <span class="comment">// index编译后生成的位置和名字，根据需要改变后缀，比如index.php</span></span><br><span class="line">        assetsRoot: path.resolve(__dirname, <span class="string">'../dist'</span>), <span class="comment">// 编译后存放生成环境代码的位置</span></span><br><span class="line">        assetsSubDirectory: <span class="string">'static'</span>, <span class="comment">// js,css,images 存放文件夹名</span></span><br><span class="line">        assetsPublicPath: <span class="string">'/'</span>, <span class="comment">// 发布的根目录，通常本地打包dist后打开文件会报错，此处修改为'./'。如果是线上的文件，可根据文件存放位置更改路径</span></span><br><span class="line">        productionSourceMap: <span class="literal">true</span>,</span><br><span class="line">        devtool: <span class="string">'#source-map'</span>,</span><br><span class="line">        <span class="comment">// unit的gzip命令用来压缩文件，gzip模式下需要压缩的文件的扩展名有js和css</span></span><br><span class="line">        productionGzip: <span class="literal">false</span>,</span><br><span class="line">        productionGzipExtensions: [<span class="string">'js'</span>, <span class="string">'css'</span>],</span><br><span class="line">        bundleAnalyzerReport: process.env.npm_config_report</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="build文件夹"><a href="#build文件夹" class="headerlink" title="build文件夹"></a>build文件夹</h2><ul>
<li>1、build/build.js<br>该文件作用，即构建生产版本。package.json 中的script的build就是node build/build.js,输入命令行npm run build 对该文件进行编译生成生产环境的代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./check-versions'</span>)()  <span class="comment">// check-versions：调用检查版本的文件。加（）代表直接调用该函数</span></span><br><span class="line"></span><br><span class="line">process.env.NODE_ENV = <span class="string">'production'</span> <span class="comment">// 设置当前是生产环境</span></span><br><span class="line"><span class="comment">// 下面定义常量引入插件</span></span><br><span class="line"><span class="keyword">const</span> ora = <span class="built_in">require</span>(<span class="string">'ora'</span>)  <span class="comment">// 加载动画</span></span><br><span class="line"><span class="keyword">const</span> rm = <span class="built_in">require</span>(<span class="string">'rimraf'</span>) <span class="comment">// 删除文件</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>) <span class="comment">// 对文案输出的一个色彩配置</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>) <span class="comment">// 默认读取下面的index.js文件</span></span><br><span class="line"><span class="keyword">const</span> webpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.prod.conf'</span>)</span><br><span class="line"><span class="comment">// 调用start的方法实现加载动画，优化用户体验</span></span><br><span class="line"><span class="keyword">const</span> spinner = ora(<span class="string">'building for production...'</span>)</span><br><span class="line">spinner.start()</span><br><span class="line"><span class="comment">// 先删除dist文件再生成新文件，因为有时候会使用hash来命名，删除整个文件可避免冗余</span></span><br><span class="line">rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  webpack(webpackConfig, (err, stats) =&gt; &#123;</span><br><span class="line">    spinner.stop()</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">    process.stdout.write(stats.toString(&#123;</span><br><span class="line">      colors: <span class="literal">true</span>,</span><br><span class="line">      modules: <span class="literal">false</span>,</span><br><span class="line">      children: <span class="literal">false</span>, <span class="comment">// If you are using ts-loader, setting this to true will make TypeScript errors show up during build.</span></span><br><span class="line">      chunks: <span class="literal">false</span>,</span><br><span class="line">      chunkModules: <span class="literal">false</span></span><br><span class="line">    &#125;) + <span class="string">'\n\n'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (stats.hasErrors()) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(chalk.red(<span class="string">'  Build failed with errors.\n'</span>))</span><br><span class="line">      process.exit(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(chalk.cyan(<span class="string">'  Build complete.\n'</span>))</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.yellow(</span><br><span class="line">      <span class="string">'  Tip: built files are meant to be served over an HTTP server.\n'</span> +</span><br><span class="line">      <span class="string">'  Opening index.html over file:// won\'t work.\n'</span></span><br><span class="line">    ))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>2、build/check-version.js<br>该文件用于检测node和npm的版本，实现版本依赖；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">'chalk'</span>)</span><br><span class="line"><span class="keyword">const</span> semver = <span class="built_in">require</span>(<span class="string">'semver'</span>) <span class="comment">// 对版本进行检查</span></span><br><span class="line"><span class="keyword">const</span> packageConfig = <span class="built_in">require</span>(<span class="string">'../package.json'</span>)</span><br><span class="line"><span class="keyword">const</span> shell = <span class="built_in">require</span>(<span class="string">'shelljs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span> (<span class="params">cmd</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 返回通过child_process 模板的新建子进程，执行 Unix 系统命令后转成没有空格的字符串</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">'child_process'</span>).execSync(cmd).toString().trim()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> versionRequirements = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'node'</span>,</span><br><span class="line">    currentVersion: semver.clean(process.version), <span class="comment">// 使用semver格式化版本</span></span><br><span class="line">    versionRequirement: packageConfig.engines.node <span class="comment">// 获取package.json中设置的node版本</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (shell.which(<span class="string">'npm'</span>)) &#123;</span><br><span class="line">  versionRequirements.push(&#123;</span><br><span class="line">    name: <span class="string">'npm'</span>,</span><br><span class="line">    currentVersion: exec(<span class="string">'npm --version'</span>), <span class="comment">// 自动调用 npm --version 命令，并且把参数返回给exec函数，从而获取纯净的版本号</span></span><br><span class="line">    versionRequirement: packageConfig.engines.npm</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> warnings = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; versionRequirements.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> mod = versionRequirements[i]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) &#123;</span><br><span class="line">        <span class="comment">// 上面这个判断就是如果版本号不符合package.json 文件中指定的版本号，就执行下面错误的代码</span></span><br><span class="line">      warnings.push(mod.name + <span class="string">': '</span> +</span><br><span class="line">        chalk.red(mod.currentVersion) + <span class="string">' should be '</span> +</span><br><span class="line">        chalk.green(mod.versionRequirement)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (warnings.length) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">''</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.yellow(<span class="string">'To use this template, you must update following to modules:'</span>))</span><br><span class="line">    <span class="built_in">console</span>.log()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; warnings.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> warning = warnings[i]</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'  '</span> + warning)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log()</span><br><span class="line">    process.exit(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>3、build/utils.js<br>utils是工具的意思，是一个用来处理css的文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> packageConfig = <span class="built_in">require</span>(<span class="string">'../package.json'</span>)</span><br><span class="line"><span class="comment">// 导出文件的位置，根据环境判断开发环境和生产环境，为config文件中index.js文件中定义的build.seeetsSubDirectory或dev.assetsSubDirectory</span></span><br><span class="line">exports.assetsPath = <span class="function"><span class="keyword">function</span> (<span class="params">_path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> assetsSubDirectory = process.env.NODE_ENV === <span class="string">'production'</span></span><br><span class="line">    ? config.build.assetsSubDirectory</span><br><span class="line">    : config.dev.assetsSubDirectory</span><br><span class="line">    <span class="comment">// Node.js path 模块提供了一些用于处理文件路径的小工具</span></span><br><span class="line">  <span class="keyword">return</span> path.posix.join(assetsSubDirectory, _path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.cssLoaders = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  options = options || &#123;&#125;</span><br><span class="line">    <span class="comment">// 使用css-loader和postcssLoader，通过options.usePostCSS属性来判断是否使用postcssLoader中压缩方法</span></span><br><span class="line">  <span class="keyword">const</span> cssLoader = &#123;</span><br><span class="line">    loader: <span class="string">'css-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      sourceMap: options.sourceMap</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> postcssLoader = &#123;</span><br><span class="line">    loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      sourceMap: options.sourceMap</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">generateLoaders</span> (<span class="params">loader, loaderOptions</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> loaders = options.usePostCSS ? [cssLoader, postcssLoader] : [cssLoader]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (loader) &#123;</span><br><span class="line">      loaders.push(&#123;</span><br><span class="line">        loader: loader + <span class="string">'-loader'</span>,</span><br><span class="line">        <span class="comment">// Object.assign是es6语法的浅复制，后两者合并后复制完成赋值</span></span><br><span class="line">        options: <span class="built_in">Object</span>.assign(&#123;&#125;, loaderOptions, &#123;</span><br><span class="line">          sourceMap: options.sourceMap</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (options.extract) &#123;</span><br><span class="line">        <span class="comment">// ExtractTextPlugin 可提取文件，代表首先使用上面处理的loader，当未能正确引入时使用vue-style-loader</span></span><br><span class="line">      <span class="keyword">return</span> ExtractTextPlugin.extract(&#123;</span><br><span class="line">        use: loaders,</span><br><span class="line">        fallback: <span class="string">'vue-style-loader'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 返回vue-style-loader连接loader的最终值</span></span><br><span class="line">      <span class="keyword">return</span> [<span class="string">'vue-style-loader'</span>].concat(loaders)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    css: generateLoaders(), <span class="comment">// 需要css-loader 和 vue-style-loader</span></span><br><span class="line">    postcss: generateLoaders(), <span class="comment">// 需要css-loader和postcssLoader 和vue-style-loader</span></span><br><span class="line">    less: generateLoaders(<span class="string">'less'</span>), <span class="comment">// 需要less-loader和vue-style-loader</span></span><br><span class="line">    sass: generateLoaders(<span class="string">'sass'</span>, &#123; <span class="attr">indentedSyntax</span>: <span class="literal">true</span> &#125;), <span class="comment">// 需要sass-loader 和 vue-style-loader</span></span><br><span class="line">    scss: generateLoaders(<span class="string">'sass'</span>), <span class="comment">// 需要sass-loader和vue-style-loader</span></span><br><span class="line">    stylus: generateLoaders(<span class="string">'stylus'</span>), <span class="comment">// 需要stylus-loader和vue-style-loader</span></span><br><span class="line">    styl: generateLoaders(<span class="string">'stylus'</span>) <span class="comment">// 需要stylus和vue-style-loader</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.styleLoaders = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> output = []</span><br><span class="line">  <span class="keyword">const</span> loaders = exports.cssLoaders(options)</span><br><span class="line">    <span class="comment">// 将各种css，less，sass等综合在一起得出结果输出output</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> extension <span class="keyword">in</span> loaders) &#123;</span><br><span class="line">    <span class="keyword">const</span> loader = loaders[extension]</span><br><span class="line">    output.push(&#123;</span><br><span class="line">      test: <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\.'</span> + extension + <span class="string">'$'</span>),</span><br><span class="line">      use: loader</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> output</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.createNotifierCallback = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 发送跨平台通知系统</span></span><br><span class="line">  <span class="keyword">const</span> notifier = <span class="built_in">require</span>(<span class="string">'node-notifier'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">severity, errors</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (severity !== <span class="string">'error'</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 当报错时输出错误信息的标题，错误信息详情，副标题以及图标</span></span><br><span class="line">    <span class="keyword">const</span> error = errors[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> filename = error.file &amp;&amp; error.file.split(<span class="string">'!'</span>).pop()</span><br><span class="line"></span><br><span class="line">    notifier.notify(&#123;</span><br><span class="line">      title: packageConfig.name,</span><br><span class="line">      message: severity + <span class="string">': '</span> + error.name,</span><br><span class="line">      subtitle: filename || <span class="string">''</span>,</span><br><span class="line">      icon: path.join(__dirname, <span class="string">'logo.png'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>4、vue-loader.config.js<br>该文件的主要作用就是处理.vue文件，解析这个文件中的每一个语言块（template，script，style）,转换成js可用的js模块</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'./utils'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</span><br><span class="line"><span class="keyword">const</span> isProduction = process.env.NODE_ENV === <span class="string">'production'</span></span><br><span class="line"><span class="keyword">const</span> sourceMapEnabled = isProduction</span><br><span class="line">  ? config.build.productionSourceMap</span><br><span class="line">  : config.dev.cssSourceMap</span><br><span class="line"><span class="comment">// 处理项目中的css文件，生产环境和测试环境默认是打开sourceMap,而extract中的提取样式到单独文件只有在生产环境中才需要</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  loaders: utils.cssLoaders(&#123;</span><br><span class="line">    sourceMap: sourceMapEnabled,</span><br><span class="line">    extract: isProduction</span><br><span class="line">  &#125;),</span><br><span class="line">  cssSourceMap: sourceMapEnabled,</span><br><span class="line">  cacheBusting: config.dev.cacheBusting,</span><br><span class="line">  <span class="comment">// 在模板编译过程中，编译器可以将某些属性，如 src 路径，转换为require调用，以便目标资源可以有 webpack 处理</span></span><br><span class="line">  transformToRequire: &#123;</span><br><span class="line">    video: [<span class="string">'src'</span>, <span class="string">'poster'</span>],</span><br><span class="line">    source: <span class="string">'src'</span>,</span><br><span class="line">    img: <span class="string">'src'</span>,</span><br><span class="line">    image: <span class="string">'xlink:href'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>5、webpack.base.conf.js<br>webpack.base.conf.js是开发和生产共同会用提出来的基础配置文件，主要实现配制输出环境，配置模块resolve和插件等</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'./utils'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</span><br><span class="line"><span class="keyword">const</span> vueLoaderConfig = <span class="built_in">require</span>(<span class="string">'./vue-loader.conf'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span> (<span class="params">dir</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 拼接处绝对路径</span></span><br><span class="line">    <span class="keyword">return</span> path.join(__dirname, <span class="string">'..'</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// path.json 将路径片段进行拼接，而path.resolve将以/开始的路径片段作为根目录，在此之前的路径将会被丢弃</span></span><br><span class="line">    <span class="comment">// path.join('/a','/b') =&gt;'a/b'; path.resolve('/a','/b') =&gt; '/b' </span></span><br><span class="line">  context: path.resolve(__dirname, <span class="string">'../'</span>),</span><br><span class="line">  <span class="comment">//配置入口，默认为单页面所以只有app一个入口</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">'./src/main.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: config.build.assetsRoot, <span class="comment">// 路径</span></span><br><span class="line">    filename: <span class="string">'[name].js'</span>, <span class="comment">// 文件名</span></span><br><span class="line">    publicPath: process.env.NODE_ENV === <span class="string">'production'</span></span><br><span class="line">      ? config.build.assetsPublicPath</span><br><span class="line">      : config.dev.assetsPublicPath <span class="comment">// 公共存放路径</span></span><br><span class="line">  &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        <span class="comment">// 自动的扩展后缀，比如一个js文件，则引用时书写可不要写.js</span></span><br><span class="line">        extensions: [<span class="string">'.js'</span>, <span class="string">'.vue'</span>, <span class="string">'.json'</span>],</span><br><span class="line">        <span class="comment">// 创建路径的别名，比如增加'components': resolve('src/components')等</span></span><br><span class="line">        alias: &#123;</span><br><span class="line">            <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span>,</span><br><span class="line">            <span class="string">'@'</span>: resolve(<span class="string">'src'</span>), <span class="comment">//@符号表示的就是src的绝对路径</span></span><br><span class="line">            <span class="string">'components'</span>: resolve(<span class="string">'src/components'</span>),</span><br><span class="line">            <span class="string">'containers'</span>: resolve(<span class="string">'src/containers'</span>),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 使用插件配置相应文件的处理方法</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 使用vue-loader将vue文件转化为js的模块</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">                loader: <span class="string">'vue-loader'</span>,</span><br><span class="line">                options: vueLoaderConfig</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// js 文件需要通过babel-loader进行编译成es5文件以及压缩等操作</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                include: [resolve(<span class="string">'src'</span>), resolve(<span class="string">'test'</span>), resolve(<span class="string">'node_modules/webpack-dev-server/client'</span>)]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 图片、音像、字体都使用url-loader进行处理，超过10000会编译成base64</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpe?g|gif|svg)(\?.*)?$/</span>,</span><br><span class="line">                loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                limit: <span class="number">10000</span>,</span><br><span class="line">                name: utils.assetsPath(<span class="string">'img/[name].[hash:7].[ext]'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/</span>,</span><br><span class="line">                loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                limit: <span class="number">10000</span>,</span><br><span class="line">                name: utils.assetsPath(<span class="string">'media/[name].[hash:7].[ext]'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(woff2?|eot|ttf|otf)(\?.*)?$/</span>,</span><br><span class="line">                loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                limit: <span class="number">10000</span>,</span><br><span class="line">                name: utils.assetsPath(<span class="string">'fonts/[name].[hash:7].[ext]'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 以下选项是Node.js 全局变量或模块，这里主要是防止webpack注入一些Node.js的东西到vue中</span></span><br><span class="line">    node: &#123;</span><br><span class="line">        setImmediate: <span class="literal">false</span>,</span><br><span class="line">        dgram: <span class="string">'empty'</span>,</span><br><span class="line">        fs: <span class="string">'empty'</span>,</span><br><span class="line">        net: <span class="string">'empty'</span>,</span><br><span class="line">        tls: <span class="string">'empty'</span>,</span><br><span class="line">        child_process: <span class="string">'empty'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>6、webpack.dev.conf.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'./utils'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</span><br><span class="line"><span class="comment">// 通过webpack-merge 实现webpack,dev.conf.js对webpack.base.config.js的继承</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> baseWebpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// 美化webpack的错误信息和日志的插件</span></span><br><span class="line"><span class="keyword">const</span> FriendlyErrorsPlugin = <span class="built_in">require</span>(<span class="string">'friendly-errors-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> portfinder = <span class="built_in">require</span>(<span class="string">'portfinder'</span>) <span class="comment">// 查看空闲端口位置，默认情况下搜索8000这个端口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HOST = process.env.HOST <span class="comment">// process 为node的一个全局对象获取当前程序的环境变量，host</span></span><br><span class="line"><span class="keyword">const</span> PORT = process.env.PORT &amp;&amp; <span class="built_in">Number</span>(process.env.PORT)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> devWebpackConfig = merge(baseWebpackConfig, &#123;</span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">        <span class="comment">// 规则是工具utils中处理出来的styleLoaders,生成了css，less，postcss等规则</span></span><br><span class="line">		rules: utils.styleLoaders(&#123;</span><br><span class="line">			sourceMap: config.dev.cssSourceMap,</span><br><span class="line">			usePostCSS: <span class="literal">true</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">    devtool: config.dev.devtool, <span class="comment">// 增强调试，上文有提及</span></span><br><span class="line">    <span class="comment">// 此处的配置都是在config的index.js中设定好的</span></span><br><span class="line">	devServer: &#123;</span><br><span class="line">        clientLogLevel: <span class="string">'warning'</span>, <span class="comment">// 控制台显示的选项有none，error，warning 或者 info</span></span><br><span class="line">        <span class="comment">// 当时用html5 History API 时，任意的 404 相应都有可能需要被替代为 index.html</span></span><br><span class="line">		historyApiFallback: &#123;</span><br><span class="line">			rewrites: [&#123;</span><br><span class="line">				<span class="keyword">from</span>: <span class="regexp">/.*/</span>,</span><br><span class="line">				to: path.posix.join(config.dev.assetsPublicPath, <span class="string">'index.html'</span>)</span><br><span class="line">			&#125;, ],</span><br><span class="line">		&#125;,</span><br><span class="line">		hot: <span class="literal">true</span>, <span class="comment">// 热加载</span></span><br><span class="line">		contentBase: <span class="literal">false</span>, </span><br><span class="line">		compress: <span class="literal">true</span>, <span class="comment">// 压缩</span></span><br><span class="line">		host: HOST || config.dev.host,</span><br><span class="line">		port: PORT || config.dev.port,</span><br><span class="line">		open: config.dev.autoOpenBrowser, <span class="comment">// 调试时，自动打开浏览器</span></span><br><span class="line">		overlay: config.dev.errorOverlay ?</span><br><span class="line">			&#123;</span><br><span class="line">				warnings: <span class="literal">false</span>,</span><br><span class="line">				errors: <span class="literal">true</span></span><br><span class="line">			&#125; :</span><br><span class="line">			<span class="literal">false</span>,  <span class="comment">// warning和error都要显示</span></span><br><span class="line">		publicPath: config.dev.assetsPublicPath,</span><br><span class="line">		proxy: config.dev.proxyTable,  <span class="comment">// 接口代理</span></span><br><span class="line">		quiet: <span class="literal">true</span>, <span class="comment">// 控制台是否禁止打印警告和错误，若用FriendlyErrorsPlugin 此处为 true</span></span><br><span class="line">		watchOptions: &#123;</span><br><span class="line">			poll: config.dev.poll, <span class="comment">// 文件系统检测改动</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	plugins: [</span><br><span class="line">		<span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">			<span class="string">'process.env'</span>: <span class="built_in">require</span>(<span class="string">'../config/dev.env'</span>)</span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> webpack.HotModuleReplacementPlugin(), <span class="comment">// 模块热替换插件，修改模块时不需要刷新页面</span></span><br><span class="line">		<span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">// 显示文件的正确名字</span></span><br><span class="line">		<span class="keyword">new</span> webpack.NoEmitOnErrorsPlugin(), <span class="comment">// 当webpack编译出错的时候，来中断打包进程，防止错误代码打包到文件中</span></span><br><span class="line">        <span class="comment">// https://github.com/ampedandwired/html-webpack-plugin</span></span><br><span class="line">        <span class="comment">// 该插件可自动生成一个html5 文件或使用模板文件将编译好的代码注入进去</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123; </span><br><span class="line">			filename: <span class="string">'index.html'</span>,</span><br><span class="line">			template: <span class="string">'index.html'</span>,</span><br><span class="line">			inject: <span class="literal">true</span></span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> CopyWebpackPlugin([&#123;  <span class="comment">// 复制代码</span></span><br><span class="line">			<span class="keyword">from</span>: path.resolve(__dirname, <span class="string">'../static'</span>),</span><br><span class="line">			to: config.dev.assetsSubDirectory,</span><br><span class="line">			ignore: [<span class="string">'.*'</span>] <span class="comment">// 忽略.*文件</span></span><br><span class="line">		&#125;])</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">	portfinder.basePort = process.env.PORT || config.dev.port</span><br><span class="line">	portfinder.getPort(<span class="function">(<span class="params">err, port</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (err) &#123;</span><br><span class="line">			reject(err)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// 端口被占用时就重新设置evn和devServer的端口</span></span><br><span class="line">			process.env.PORT = port</span><br><span class="line">            devWebpackConfig.devServer.port = port</span><br><span class="line">            <span class="comment">// 友好的输出信息</span></span><br><span class="line">			devWebpackConfig.plugins.push(<span class="keyword">new</span> FriendlyErrorsPlugin(&#123;</span><br><span class="line">				compilationSuccessInfo: &#123;</span><br><span class="line">					messages: [<span class="string">`Your application is running here: http://<span class="subst">$&#123;devWebpackConfig.devServer.host&#125;</span>:<span class="subst">$&#123;port&#125;</span>`</span>],</span><br><span class="line">				&#125;,</span><br><span class="line">				onErrors: config.dev.notifyOnErrors ?</span><br><span class="line">					utils.createNotifierCallback() :</span><br><span class="line">					<span class="literal">undefined</span></span><br><span class="line">			&#125;))</span><br><span class="line"></span><br><span class="line">			resolve(devWebpackConfig)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>7、webpack.prod.conf.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'./utils'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> baseWebpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf'</span>)</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> env = <span class="built_in">require</span>(<span class="string">'../config/prod.env'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpackConfig = merge(baseWebpackConfig, &#123;</span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">        <span class="comment">// 调用utils.styleLoaders的方法</span></span><br><span class="line">		rules: utils.styleLoaders(&#123;</span><br><span class="line">			sourceMap: config.build.productionSourceMap, <span class="comment">// 开启调试的模式，默认为true</span></span><br><span class="line">			extract: <span class="literal">true</span>,</span><br><span class="line">			usePostCSS: <span class="literal">true</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">	devtool: config.build.productionSourceMap ? config.build.devtool : <span class="literal">false</span>,</span><br><span class="line">	output: &#123;</span><br><span class="line">		path: config.build.assetsRoot,</span><br><span class="line">		filename: utils.assetsPath(<span class="string">'js/[name].[chunkhash].js'</span>),</span><br><span class="line">		chunkFilename: utils.assetsPath(<span class="string">'js/[id].[chunkhash].js'</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	plugins: [</span><br><span class="line">		<span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">			<span class="string">'process.env'</span>: env</span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">			uglifyOptions: &#123;</span><br><span class="line">				compress: &#123; <span class="comment">// 压缩</span></span><br><span class="line">					warnings: <span class="literal">false</span> <span class="comment">// 警告：true保留警告，false不保留</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			sourceMap: config.build.productionSourceMap,</span><br><span class="line">			parallel: <span class="literal">true</span></span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> ExtractTextPlugin(&#123; <span class="comment">// 抽取文件。比如打包之后的index页面有style插入，就是这个插件抽取出来的，较少请求</span></span><br><span class="line">			filename: utils.assetsPath(<span class="string">'css/[name].[contenthash].css'</span>),</span><br><span class="line">			allChunks: <span class="literal">true</span>,</span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> OptimizeCSSPlugin(&#123; <span class="comment">// 优化css的插件</span></span><br><span class="line">			cssProcessorOptions: config.build.productionSourceMap ?</span><br><span class="line">				&#123;</span><br><span class="line">					safe: <span class="literal">true</span>,</span><br><span class="line">					map: &#123;</span><br><span class="line">						inline: <span class="literal">false</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125; :</span><br><span class="line">				&#123;</span><br><span class="line">					safe: <span class="literal">true</span></span><br><span class="line">				&#125;</span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> HtmlWebpackPlugin(&#123;  <span class="comment">// html打包</span></span><br><span class="line">			filename: config.build.index,</span><br><span class="line">			template: <span class="string">'index.html'</span>,</span><br><span class="line">			inject: <span class="literal">true</span>,</span><br><span class="line">			minify: &#123; <span class="comment">//压缩</span></span><br><span class="line">				removeComments: <span class="literal">true</span>, <span class="comment">// 删除注释</span></span><br><span class="line">				collapseWhitespace: <span class="literal">true</span>, <span class="comment">// 删除空格</span></span><br><span class="line">				removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 删除属性的引号</span></span><br><span class="line">				<span class="comment">// more options:</span></span><br><span class="line">			&#125;,</span><br><span class="line">			chunksSortMode: <span class="string">'dependency'</span> <span class="comment">// 模块排序，按照我们需要的顺序排序</span></span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> webpack.HashedModuleIdsPlugin(),</span><br><span class="line">		<span class="keyword">new</span> webpack.optimize.ModuleConcatenationPlugin(),</span><br><span class="line">		<span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123; <span class="comment">// 抽取公共的模块</span></span><br><span class="line">			name: <span class="string">'vendor'</span>,</span><br><span class="line">			minChunks(<span class="built_in">module</span>) &#123;</span><br><span class="line">				<span class="keyword">return</span> (</span><br><span class="line">					<span class="built_in">module</span>.resource &amp;&amp;</span><br><span class="line">					/\.js$/.test(<span class="built_in">module</span>.resource) &amp;&amp;</span><br><span class="line">					<span class="built_in">module</span>.resource.indexOf(</span><br><span class="line">						path.join(__dirname, <span class="string">'../node_modules'</span>)</span><br><span class="line">					) === <span class="number">0</span></span><br><span class="line">				)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">			name: <span class="string">'manifest'</span>,</span><br><span class="line">			minChunks: <span class="literal">Infinity</span></span><br><span class="line">		&#125;),</span><br><span class="line">		<span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">			name: <span class="string">'app'</span>,</span><br><span class="line">			<span class="keyword">async</span>: <span class="string">'vendor-async'</span>,</span><br><span class="line">			children: <span class="literal">true</span>,</span><br><span class="line">			minChunks: <span class="number">3</span></span><br><span class="line">		&#125;),</span><br><span class="line"></span><br><span class="line">		<span class="keyword">new</span> CopyWebpackPlugin([&#123; <span class="comment">// 复制，比如打包完之后需要把打包的文件复制到dist里面</span></span><br><span class="line">			<span class="keyword">from</span>: path.resolve(__dirname, <span class="string">'../static'</span>),</span><br><span class="line">			to: config.build.assetsSubDirectory,</span><br><span class="line">			ignore: [<span class="string">'.*'</span>]</span><br><span class="line">		&#125;])</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (config.build.productionGzip) &#123;</span><br><span class="line">	<span class="keyword">const</span> CompressionWebpackPlugin = <span class="built_in">require</span>(<span class="string">'compression-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line">	webpackConfig.plugins.push(</span><br><span class="line">		<span class="keyword">new</span> CompressionWebpackPlugin(&#123;</span><br><span class="line">			asset: <span class="string">'[path].gz[query]'</span>,</span><br><span class="line">			algorithm: <span class="string">'gzip'</span>,</span><br><span class="line">			test: <span class="keyword">new</span> <span class="built_in">RegExp</span>(</span><br><span class="line">				<span class="string">'\\.('</span> +</span><br><span class="line">				config.build.productionGzipExtensions.join(<span class="string">'|'</span>) +</span><br><span class="line">				<span class="string">')$'</span></span><br><span class="line">			),</span><br><span class="line">			threshold: <span class="number">10240</span>,</span><br><span class="line">			minRatio: <span class="number">0.8</span></span><br><span class="line">		&#125;)</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (config.build.bundleAnalyzerReport) &#123;</span><br><span class="line">	<span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin</span><br><span class="line">	webpackConfig.plugins.push(<span class="keyword">new</span> BundleAnalyzerPlugin())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = webpackConfig</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/vue-cli搭建的详细介绍/" data-id="cjhor2h6u0004vgzbv5pdrgbq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cookies" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/cookies/" class="article-date">
  <time datetime="2018-05-27T08:58:42.969Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/cookies/">cookies封装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这篇文章就是简单的封装cookies的方法</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/cookies/" data-id="cjhor2h6d0000vgzb10s3vnwe" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jQuery的$.fn.extend和$.extend" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/27/jQuery的$.fn.extend和$.extend/" class="article-date">
  <time datetime="2018-05-27T08:52:43.644Z" itemprop="datePublished">2018-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/27/jQuery的$.fn.extend和$.extend/">jQuery的$.fn.extend和$.extend区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="fn-extend"><a href="#fn-extend" class="headerlink" title="$.fn.extend"></a>$.fn.extend</h2><p>$.fn.extend() 函数为jQuery扩展一个或多个实例属性和方法(主要用于扩展方法)。</p>
<p><code>提示：</code> jQuery.fn是jQuery的原型对象，其extend()方法用于为jQuery的<code>原型</code>添加新的属性和方法。这些方法可以在jQuery实例对象上调用。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.fn.extend( object ); <span class="comment">// Object类型 指定的对象，用来合并到jQuery的原型对象上。</span></span><br></pre></td></tr></table></figure>
<h2 id="extend"><a href="#extend" class="headerlink" title="$.extend"></a>$.extend</h2><p>jQuery.extend() 函数用于将一个或多个对象的内容合并到目标对象。</p>
<p><code>注意：</code></p>
<ol>
<li>如果只为$.extend()指定了一个参数，则意味着参数target被省略。此时，target就是jQuery对象本身。通过这种方式，我们可以为全局对象jQuery添加新的函数。</li>
<li>如果多个对象具有相同的属性，则后者会覆盖前者的属性值。</li>
</ol>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//语法</span></span><br><span class="line">$.extend( target [, object1 ] [, objectN ] );</span><br><span class="line"><span class="comment">//指示是否深度合并</span></span><br><span class="line">$.extend( [deep ], target, object1 [, objectN ] );</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 警告: 不支持第一个参数传递 false 。</span></span><br><span class="line"><span class="comment"> * deep:可选。 Boolean类型 指示是否深度合并对象，默认为false。如果该值为true，且多个对象的某个同名属性也都是对象，则该"属性对象"的属性也将进行合并。</span></span><br><span class="line"><span class="comment"> * target：Object类型 目标对象，其他对象的成员属性将被附加到该对象上。</span></span><br><span class="line"><span class="comment"> * object1： 可选。 Object类型 第一个被合并的对象。</span></span><br><span class="line"><span class="comment"> * objectN： 可选。 Object类型 第N个被合并的对象。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/27/jQuery的$.fn.extend和$.extend/" data-id="cjhozwdsh0001uwzbkw1agtj2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/05/27/面试题/">这几天的面试题</a>
          </li>
        
          <li>
            <a href="/2018/05/27/jQuery的优化/">jQuery优化</a>
          </li>
        
          <li>
            <a href="/2018/05/27/Git和SVN/">Git 和SVN的区别</a>
          </li>
        
          <li>
            <a href="/2018/05/27/Markdown语法/">Markdown语法入门</a>
          </li>
        
          <li>
            <a href="/2018/05/27/基于github和hexo搭建博客/">基于Github和Hexo搭建自己的博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 jhzhang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>